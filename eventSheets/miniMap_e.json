{
	"name": "miniMap_e",
	"events": [
		{
			"eventType": "group",
			"disabled": false,
			"title": "MiniMap",
			"description": "",
			"isActiveOnStart": true,
			"children": [
				{
					"eventType": "variable",
					"name": "isMap",
					"type": "boolean",
					"initialValue": "true",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 730392605809848
				},
				{
					"eventType": "variable",
					"name": "isOpenMap",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 723887130701049
				},
				{
					"eventType": "variable",
					"name": "isDrawing",
					"type": "boolean",
					"initialValue": "false",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 304276536700670
				},
				{
					"eventType": "variable",
					"name": "mapWidth",
					"type": "number",
					"initialValue": "-1",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 438156306766080
				},
				{
					"eventType": "variable",
					"name": "mapHeight",
					"type": "number",
					"initialValue": "-1",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 682785954103016
				},
				{
					"eventType": "variable",
					"name": "mapLayer",
					"type": "string",
					"initialValue": "map",
					"comment": "",
					"isStatic": true,
					"isConstant": false,
					"sid": 641568969910300
				},
				{
					"eventType": "block",
					"conditions": [
						{
							"id": "compare-boolean-eventvar",
							"objectClass": "System",
							"sid": 192234776766503,
							"parameters": {
								"variable": "isMap"
							}
						}
					],
					"actions": [],
					"sid": 830596310545986,
					"children": [
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-start-of-layout",
									"objectClass": "System",
									"sid": 164439127296985
								}
							],
							"actions": [],
							"sid": 605101661609722,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-overlapping-another-object",
											"objectClass": "spr_playerActual",
											"sid": 575602894197464,
											"parameters": {
												"object": "zoneCtrl_spr"
											}
										}
									],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "spr_playerActual",
											"sid": 913774767058037,
											"parameters": {
												"instance-variable": "zoneId",
												"value": "zoneCtrl_spr.UID"
											}
										},
										{
											"id": "set-boolean-instvar",
											"objectClass": "zoneCtrl_spr",
											"sid": 477155931832039,
											"parameters": {
												"instance-variable": "wasTouched",
												"value": "true"
											}
										},
										{
											"id": "create-object",
											"objectClass": "System",
											"sid": 299926324017902,
											"parameters": {
												"object-to-create": "miniMap",
												"layer": "mapLayer",
												"x": "0",
												"y": "0",
												"create-hierarchy": false,
												"template-name": "\"\""
											}
										},
										{
											"id": "wait-for-previous-actions",
											"objectClass": "System",
											"sid": 886937041713119
										},
										{
											"id": "set-size",
											"objectClass": "miniMap",
											"sid": 217070601584541,
											"parameters": {
												"width": "OriginalViewportWidth",
												"height": "OriginalViewportHeight"
											}
										},
										{
											"id": "set-position",
											"objectClass": "miniMap",
											"sid": 862912821164304,
											"parameters": {
												"x": "scrollx  - (Self.Width / 2)",
												"y": "scrolly  - (Self.Height / 2)"
											}
										},
										{
											"callFunction": "drawNewTmMiniMap",
											"sid": 102829571029381,
											"parameters": [
												"\"116,114\""
											]
										}
									],
									"sid": 500458988276854
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-created",
									"objectClass": "mapItems",
									"sid": 957631585765317
								}
							],
							"actions": [
								{
									"id": "create-object-by-name",
									"objectClass": "System",
									"sid": 450303141872551,
									"parameters": {
										"object-name": "mapItems.ObjectTypeName & \"_icon\"",
										"layer": "mapLayer",
										"x": "0",
										"y": "0",
										"create-hierarchy": false,
										"template-name": "\"\""
									}
								}
							],
							"sid": 768513080862467,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-last-created",
											"objectClass": "System",
											"sid": 634185581761217,
											"parameters": {
												"object": "mapIcons"
											}
										}
									],
									"actions": [
										{
											"id": "add-child",
											"objectClass": "mapItems",
											"sid": 960911022852568,
											"parameters": {
												"child": "mapIcons",
												"transform-x": false,
												"transform-y": false,
												"transform-w": false,
												"transform-h": false,
												"transform-a": false,
												"transform-o": false,
												"transform-z-elevation": false,
												"transform-visibility": false,
												"destroy-with-parent": true
											}
										},
										{
											"id": "set-visible",
											"objectClass": "mapIcons",
											"sid": 470167624896312,
											"parameters": {
												"visibility": "invisible"
											}
										},
										{
											"id": "set-collisions-enabled",
											"objectClass": "mapIcons",
											"sid": 354890569444348,
											"parameters": {
												"collisions": "disabled"
											}
										}
									],
									"sid": 703255164939996
								}
							]
						},
						{
							"eventType": "block",
							"conditions": [
								{
									"id": "on-collision-with-another-object",
									"objectClass": "spr_playerActual",
									"sid": 689593518796705,
									"parameters": {
										"object": "zoneCtrl_spr"
									}
								},
								{
									"id": "compare-instance-variable",
									"objectClass": "spr_playerActual",
									"sid": 492729209376635,
									"disabled": true,
									"parameters": {
										"instance-variable": "zoneId",
										"comparison": 1,
										"value": "zoneCtrl_spr.UID"
									}
								}
							],
							"actions": [
								{
									"id": "set-instvar-value",
									"objectClass": "spr_playerActual",
									"sid": 668222733235973,
									"parameters": {
										"instance-variable": "zoneId",
										"value": "zoneCtrl_spr.UID"
									}
								}
							],
							"sid": 598422114474740,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-boolean-instance-variable-set",
											"objectClass": "zoneCtrl_spr",
											"sid": 566003004664946,
											"parameters": {
												"instance-variable": "wasTouched"
											},
											"isInverted": true
										}
									],
									"actions": [
										{
											"id": "set-boolean-instvar",
											"objectClass": "zoneCtrl_spr",
											"sid": 716254615653561,
											"parameters": {
												"instance-variable": "wasTouched",
												"value": "true"
											}
										},
										{
											"callFunction": "drawNewTmMiniMap",
											"sid": 769121474804347,
											"parameters": [
												"\"116,114\""
											]
										}
									],
									"sid": 132464138973525
								}
							]
						},
						{
							"eventType": "group",
							"disabled": false,
							"title": "Map Ctrls",
							"description": "",
							"isActiveOnStart": true,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "is-on-floor",
											"objectClass": "spr_playerActual",
											"sid": 610380408936202,
											"behaviorType": "Platform"
										}
									],
									"actions": [],
									"sid": 466299686729542,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-boolean-eventvar",
													"objectClass": "System",
													"sid": 704765241337788,
													"parameters": {
														"variable": "isOpenMap"
													},
													"isInverted": true
												}
											],
											"actions": [],
											"sid": 217024408801908,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "key-is-down",
															"objectClass": "Keyboard",
															"sid": 745017977956266,
															"parameters": {
																"key": 77
															}
														}
													],
													"actions": [
														{
															"callFunction": "showMiniMap",
															"sid": 861234663360756
														}
													],
													"sid": 945114733435917
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 841357464199372
												},
												{
													"id": "compare-boolean-eventvar",
													"objectClass": "System",
													"sid": 329835310002903,
													"parameters": {
														"variable": "isOpenMap"
													}
												}
											],
											"actions": [
												{
													"callFunction": "drawMapIcons",
													"sid": 833521886104497
												}
											],
											"sid": 584607848277838
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "on-key-released",
											"objectClass": "Keyboard",
											"sid": 601728445547454,
											"parameters": {
												"key": 77
											}
										},
										{
											"id": "is-on-floor",
											"objectClass": "spr_playerActual",
											"sid": 734346421007501,
											"behaviorType": "Platform",
											"isInverted": true
										}
									],
									"actions": [
										{
											"callFunction": "hideMiniMap",
											"sid": 873580029155477
										}
									],
									"sid": 736353906818415,
									"isOrBlock": true
								}
							],
							"sid": 276696491327823
						},
						{
							"functionName": "drawNewTmMiniMap",
							"functionDescription": "",
							"functionCategory": "MiniMap",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "ignoreTiles",
									"type": "string",
									"initialValue": "",
									"comment": "",
									"sid": 180134613952187
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 992020353447037,
							"children": [
								{
									"eventType": "variable",
									"name": "isSwitchScaleBack",
									"type": "boolean",
									"initialValue": "false",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 125554475913399
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-boolean-eventvar",
											"objectClass": "System",
											"sid": 638163253550598,
											"parameters": {
												"variable": "isDrawing"
											},
											"isInverted": true
										}
									],
									"actions": [],
									"sid": 522831773877030,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-boolean-eventvar",
													"objectClass": "System",
													"sid": 455794529040741,
													"parameters": {
														"variable": "isGfxHigh"
													},
													"isInverted": true
												}
											],
											"actions": [
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 182976765983117,
													"parameters": {
														"variable": "isSwitchScaleBack",
														"value": "true"
													}
												},
												{
													"id": "set-fullscreen-scaling",
													"objectClass": "System",
													"sid": 219251520632641,
													"parameters": {
														"fullscreen-scaling": "high-quality"
													}
												}
											],
											"sid": 738692054694712
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-boolean-eventvar",
													"objectClass": "System",
													"sid": 308903239970751,
													"parameters": {
														"variable": "isDrawing",
														"value": "true"
													}
												},
												{
													"id": "set-fullscreen-scaling",
													"objectClass": "System",
													"sid": 302419766489899,
													"parameters": {
														"fullscreen-scaling": "high-quality"
													}
												},
												{
													"id": "split-string",
													"objectClass": "Array",
													"sid": 507628195908376,
													"parameters": {
														"string": "ignoreTiles",
														"separator": "\",\"",
														"type": "number"
													}
												},
												{
													"id": "create-object",
													"objectClass": "System",
													"sid": 748886008758204,
													"parameters": {
														"object-to-create": "minmap_tm",
														"layer": "tm_platform.LayerName",
														"x": "0",
														"y": "0",
														"create-hierarchy": false,
														"template-name": "\"\""
													}
												},
												{
													"id": "wait-for-previous-actions",
													"objectClass": "System",
													"sid": 142003448259657
												},
												{
													"id": "set-visible",
													"objectClass": "minmap_tm",
													"sid": 118983158064631,
													"parameters": {
														"visibility": "invisible"
													}
												},
												{
													"id": "set-size",
													"objectClass": "minmap_tm",
													"sid": 343757235589441,
													"parameters": {
														"width": "LayoutWidth",
														"height": "LayoutHeight"
													}
												}
											],
											"sid": 129827399927565,
											"children": [
												{
													"eventType": "comment",
													"text": "repeatedly draw columns of tiles as on minimap, creating two tm's. one as the lvl and the other to be made into a minimap"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "repeat",
															"objectClass": "System",
															"sid": 168333061116618,
															"parameters": {
																"count": "tm_platform.MapDisplayWidth"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "draw a vertical line"
														},
														{
															"callFunction": "drawTmColumn",
															"sid": 403551987461596,
															"parameters": [
																"loopindex"
															]
														}
													],
													"sid": 693675739408050
												},
												{
													"eventType": "comment",
													"text": "scale up to take a snapshot to scale down. canvas is weird"
												},
												{
													"eventType": "block",
													"conditions": [],
													"actions": [
														{
															"callFunction": "setZBasedOnFOV",
															"sid": 223471428449176
														},
														{
															"id": "set-visible",
															"objectClass": "miniMap",
															"sid": 665861155691556,
															"parameters": {
																"visibility": "invisible"
															}
														},
														{
															"id": "set-instvar-value",
															"objectClass": "miniMap",
															"sid": 347305377350224,
															"parameters": {
																"instance-variable": "pScale",
																"value": "max(mapWidth / OriginalViewportWidth, mapHeight / OriginalViewportHeight) / (OriginalViewportWidth / (cutOut.Width * miniMap.scale))"
															}
														},
														{
															"type": "comment",
															"text": "start the taking of a snapshot"
														},
														{
															"id": "set-size",
															"objectClass": "miniMap",
															"sid": 271422277201712,
															"parameters": {
																"width": "OriginalViewportWidth",
																"height": "OriginalViewportHeight"
															}
														},
														{
															"id": "move-to-layer",
															"objectClass": "miniMap",
															"sid": 198028176185548,
															"parameters": {
																"layer": "tm_platform.LayerName"
															}
														},
														{
															"id": "set-position",
															"objectClass": "miniMap",
															"sid": 591805369987930,
															"parameters": {
																"x": "scrollx  - (Self.Width / 2)",
																"y": "scrolly  - (Self.Height / 2)"
															}
														},
														{
															"id": "clear-canvas",
															"objectClass": "miniMap",
															"sid": 942670698267339,
															"parameters": {
																"color": "rgba(0,0,0, 0)"
															}
														},
														{
															"id": "paste-object",
															"objectClass": "miniMap",
															"sid": 792851596608078,
															"parameters": {
																"object": "minmap_tm",
																"effects": "without-effects"
															}
														},
														{
															"id": "wait-for-previous-actions",
															"objectClass": "System",
															"sid": 538881753652683
														},
														{
															"type": "comment",
															"text": "end the taking of a snapshot"
														},
														{
															"id": "set-visible",
															"objectClass": "minmap_tm",
															"sid": 776426631586149,
															"parameters": {
																"visibility": "invisible"
															}
														},
														{
															"id": "destroy",
															"objectClass": "minmap_tm",
															"sid": 752691003396573
														},
														{
															"id": "set-visible",
															"objectClass": "miniMap",
															"sid": 463463500652668,
															"parameters": {
																"visibility": "visible"
															}
														},
														{
															"type": "comment",
															"text": "start move to correct position"
														},
														{
															"id": "move-to-layer",
															"objectClass": "miniMap",
															"sid": 750959999690258,
															"parameters": {
																"layer": "mapLayer"
															}
														},
														{
															"callFunction": "setMiniMapOrigPos",
															"sid": 611566040667585,
															"parameters": [
																"cutOut.X",
																"cutOut.Y"
															]
														},
														{
															"id": "set-position",
															"objectClass": "miniMap",
															"sid": 632096678576226,
															"parameters": {
																"x": "Self.pOrigX",
																"y": "Self.pOrigY"
															}
														},
														{
															"id": "set-size",
															"objectClass": "miniMap",
															"sid": 275543333982221,
															"parameters": {
																"width": "miniMap.Width * miniMap.pScale",
																"height": "miniMap.Height * miniMap.pScale"
															}
														},
														{
															"type": "comment",
															"text": "end move to correct position"
														},
														{
															"id": "set-boolean-eventvar",
															"objectClass": "System",
															"sid": 811969492124606,
															"parameters": {
																"variable": "isDrawing",
																"value": "false"
															}
														},
														{
															"id": "set-layer-parallax",
															"objectClass": "System",
															"sid": 450174709877946,
															"parameters": {
																"layer": "mapLayer",
																"parallax-x": "100 * ((mapWidth / LayoutWidth) * (miniMap.pScaleFov * miniMap.pScale))",
																"parallax-y": "100 * ((mapHeight / LayoutHeight)* (miniMap.pScaleFov * miniMap.pScale))"
															}
														}
													],
													"sid": 806767774221756,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "compare-boolean-eventvar",
																	"objectClass": "System",
																	"sid": 206466349734001,
																	"parameters": {
																		"variable": "isSwitchScaleBack"
																	}
																}
															],
															"actions": [
																{
																	"id": "set-fullscreen-scaling",
																	"objectClass": "System",
																	"sid": 848181741765541,
																	"parameters": {
																		"fullscreen-scaling": "low-quality"
																	}
																}
															],
															"sid": 384923345607178
														}
													]
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "drawTmColumn",
							"functionDescription": "",
							"functionCategory": "MiniMap",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "i",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 530266181001204
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 999164078192968,
							"children": [
								{
									"eventType": "variable",
									"name": "J",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 887977928973922
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "repeat",
											"objectClass": "System",
											"sid": 778477347186898,
											"parameters": {
												"count": "tm_platform.MapDisplayHeight"
											}
										}
									],
									"actions": [
										{
											"type": "comment",
											"text": "draw a vertical line"
										},
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 710953322010790,
											"parameters": {
												"variable": "J",
												"value": "loopindex"
											}
										}
									],
									"sid": 181957369490973,
									"children": [
										{
											"eventType": "comment",
											"text": "if not empty space, draw"
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-tile-at",
													"objectClass": "tm_platform",
													"sid": 568484522816484,
													"parameters": {
														"tile-x": "i",
														"tile-y": "J",
														"comparison": 1,
														"tile": "-1"
													}
												}
											],
											"actions": [],
											"sid": 684319530392858,
											"children": [
												{
													"eventType": "variable",
													"name": "canDraw",
													"type": "boolean",
													"initialValue": "true",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 691068003346107
												},
												{
													"eventType": "variable",
													"name": "X",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 493151631881825
												},
												{
													"eventType": "variable",
													"name": "Y",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 375118907257638
												},
												{
													"eventType": "variable",
													"name": "uid",
													"type": "number",
													"initialValue": "0",
													"comment": "",
													"isStatic": false,
													"isConstant": false,
													"sid": 969811655134610
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-overlapping-point",
															"objectClass": "System",
															"sid": 676630936442003,
															"parameters": {
																"object": "zoneCtrl_spr",
																"x": "tm_platform.TileToPositionX(i)",
																"y": "tm_platform.TileToPositionY(J)"
															}
														}
													],
													"actions": [],
													"sid": 917258693843012,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "is-boolean-instance-variable-set",
																	"objectClass": "zoneCtrl_spr",
																	"sid": 694203138315582,
																	"parameters": {
																		"instance-variable": "wasTouched"
																	},
																	"isInverted": true
																}
															],
															"actions": [
																{
																	"id": "set-boolean-eventvar",
																	"objectClass": "System",
																	"sid": 208926835603610,
																	"parameters": {
																		"variable": "canDraw",
																		"value": "false"
																	}
																}
															],
															"sid": 358940332514727
														}
													]
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-boolean-eventvar",
															"objectClass": "System",
															"sid": 152537377015142,
															"parameters": {
																"variable": "canDraw"
															}
														}
													],
													"actions": [],
													"sid": 766961277351337,
													"children": [
														{
															"eventType": "block",
															"conditions": [
																{
																	"id": "for",
																	"objectClass": "System",
																	"sid": 359467407010716,
																	"parameters": {
																		"name": "\"\"",
																		"start-index": "0",
																		"end-index": "Array.Count"
																	}
																}
															],
															"actions": [],
															"sid": 131032063486522,
															"children": [
																{
																	"eventType": "block",
																	"conditions": [
																		{
																			"id": "compare-tile-at",
																			"objectClass": "tm_platform",
																			"sid": 439042677531098,
																			"parameters": {
																				"tile-x": "i",
																				"tile-y": "J",
																				"comparison": 0,
																				"tile": "Array.At(loopindex)"
																			}
																		}
																	],
																	"actions": [
																		{
																			"id": "set-boolean-eventvar",
																			"objectClass": "System",
																			"sid": 751072777255064,
																			"parameters": {
																				"variable": "canDraw",
																				"value": "false"
																			}
																		},
																		{
																			"id": "stop-loop",
																			"objectClass": "System",
																			"sid": 238827220987949
																		}
																	],
																	"sid": 440650250509698
																}
															]
														}
													]
												},
												{
													"eventType": "comment",
													"text": "draw rectangle as \"pixels\" on minimap"
												},
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "compare-boolean-eventvar",
															"objectClass": "System",
															"sid": 887097781028908,
															"parameters": {
																"variable": "canDraw"
															}
														}
													],
													"actions": [
														{
															"type": "comment",
															"text": "TileToPosition gets the center of the tiles XY. so have of tile must be subtracted from the equation along with scal taken into account"
														},
														{
															"id": "set-tile-with-brush",
															"objectClass": "minmap_tm",
															"sid": 236981431175049,
															"parameters": {
																"tile-x": "i",
																"tile-y": "J",
																"brush": {
																	"objectClassName": "minmap_tm",
																	"brushName": "normal"
																}
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 625994531685059,
															"parameters": {
																"variable": "mapWidth",
																"value": "max(mapWidth, (i+1) * tm_platform.TileWidth)"
															}
														},
														{
															"id": "set-eventvar-value",
															"objectClass": "System",
															"sid": 707954512664725,
															"parameters": {
																"variable": "mapHeight",
																"value": "max(mapHeight, (J+1) * tm_platform.TileHeight)"
															}
														}
													],
													"sid": 654683101604056
												}
											]
										}
									]
								}
							]
						},
						{
							"functionName": "setZBasedOnFOV",
							"functionDescription": "",
							"functionCategory": "MiniMap",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-position",
									"objectClass": "minmap_tm",
									"sid": 350977247300015,
									"parameters": {
										"x": "scrollx - mapWidth/2",
										"y": "scrolly - mapHeight/2"
									}
								}
							],
							"sid": 313535121415474,
							"children": [
								{
									"eventType": "variable",
									"name": "requiredZ",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 583406171111772
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "compare-two-values",
											"objectClass": "System",
											"sid": 642274029016465,
											"parameters": {
												"first-value": "mapHeight",
												"comparison": 4,
												"second-value": "mapWidth"
											}
										}
									],
									"actions": [
										{
											"id": "set-eventvar-value",
											"objectClass": "System",
											"sid": 167634912721374,
											"parameters": {
												"variable": "requiredZ",
												"value": "-(1 - mapHeight / OriginalViewportHeight) * 3DCamera.DefaultCameraZ\n"
											}
										}
									],
									"sid": 367058746710780
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "else",
											"objectClass": "System",
											"sid": 530455623784540
										}
									],
									"actions": [],
									"sid": 378632150905736,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "compare-two-values",
													"objectClass": "System",
													"sid": 679832998841898,
													"parameters": {
														"first-value": "OriginalViewportWidth / OriginalViewportHeight",
														"comparison": 4,
														"second-value": "mapWidth / mapHeight"
													}
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 555269506828466,
													"parameters": {
														"variable": "requiredZ",
														"value": "-(1 - mapHeight / OriginalViewportHeight) * 3DCamera.DefaultCameraZ\n"
													}
												}
											],
											"sid": 385139054249425
										},
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "else",
													"objectClass": "System",
													"sid": 817432549982914
												}
											],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 778637238295276,
													"parameters": {
														"variable": "requiredZ",
														"value": "- (1 -mapWidth / OriginalViewportWidth) * 3DCamera.DefaultCameraZ\n"
													}
												}
											],
											"sid": 722833137361168
										}
									]
								},
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-z-elevation",
											"objectClass": "minmap_tm",
											"sid": 485440926543841,
											"parameters": {
												"z": "-requiredZ"
											}
										}
									],
									"sid": 186806867395496
								}
							]
						},
						{
							"functionName": "setMiniMapOrigPos",
							"functionDescription": "",
							"functionCategory": "MiniMap",
							"functionReturnType": "none",
							"functionCopyPicked": true,
							"functionIsAsync": false,
							"functionParameters": [
								{
									"name": "origX",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 385194548988676
								},
								{
									"name": "origY",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"sid": 865711723041032
								}
							],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 558348852696631,
							"children": [
								{
									"eventType": "block",
									"conditions": [],
									"actions": [
										{
											"id": "set-instvar-value",
											"objectClass": "miniMap",
											"sid": 151401362876221,
											"parameters": {
												"instance-variable": "pScaleFov",
												"value": "min(OriginalViewportWidth / mapWidth, OriginalViewportHeight / mapHeight)"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "miniMap",
											"sid": 616288134907761,
											"parameters": {
												"instance-variable": "pHeightDiff",
												"value": "((OriginalViewportHeight - (miniMap.pScaleFov * mapHeight)) / 2) * miniMap.pScale"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "miniMap",
											"sid": 468041706474564,
											"parameters": {
												"instance-variable": "pWidthDiff",
												"value": "((OriginalViewportWidth - (miniMap.pScaleFov * mapWidth)) / 2) * miniMap.pScale"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "miniMap",
											"sid": 247826793671151,
											"parameters": {
												"instance-variable": "pOrigX",
												"value": "origX - miniMap.pWidthDiff"
											}
										},
										{
											"id": "set-instvar-value",
											"objectClass": "miniMap",
											"sid": 853163611949413,
											"parameters": {
												"instance-variable": "pOrigY",
												"value": "origY - miniMap.pHeightDiff"
											}
										}
									],
									"sid": 334788525574026
								}
							]
						},
						{
							"functionName": "showMiniMap",
							"functionDescription": "",
							"functionCategory": "MiniMap",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 576593942749860,
									"parameters": {
										"variable": "isOpenMap",
										"value": "true"
									}
								},
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 312029920021132,
									"parameters": {
										"layer": "\"MINIMAP\"",
										"visibility": "visible"
									}
								}
							],
							"sid": 975450030067818,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "for-each",
											"objectClass": "System",
											"sid": 154304547375333,
											"parameters": {
												"object": "mapItems"
											}
										}
									],
									"actions": [],
									"sid": 821866271835285,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "is-overlapping-another-object",
													"objectClass": "mapItems",
													"sid": 597102282260819,
													"parameters": {
														"object": "zoneCtrl_spr"
													}
												},
												{
													"id": "is-boolean-instance-variable-set",
													"objectClass": "zoneCtrl_spr",
													"sid": 196979892604322,
													"parameters": {
														"instance-variable": "wasTouched"
													}
												},
												{
													"id": "pick-children",
													"objectClass": "mapItems",
													"sid": 345097266396695,
													"parameters": {
														"child": "mapIcons",
														"which": "own"
													}
												}
											],
											"actions": [
												{
													"id": "set-visible",
													"objectClass": "mapIcons",
													"sid": 260891266151531,
													"parameters": {
														"visibility": "visible"
													}
												}
											],
											"sid": 725875242410838
										}
									]
								}
							]
						},
						{
							"functionName": "hideMiniMap",
							"functionDescription": "",
							"functionCategory": "MiniMap",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [
								{
									"id": "set-layer-visible",
									"objectClass": "System",
									"sid": 655168649111945,
									"parameters": {
										"layer": "\"MINIMAP\"",
										"visibility": "invisible"
									}
								},
								{
									"id": "set-boolean-eventvar",
									"objectClass": "System",
									"sid": 249185526770445,
									"parameters": {
										"variable": "isOpenMap",
										"value": "false"
									}
								}
							],
							"sid": 706703121901069,
							"children": [
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "pick-all",
											"objectClass": "System",
											"sid": 115381411989359,
											"parameters": {
												"object": "mapIcons"
											}
										}
									],
									"actions": [
										{
											"id": "set-visible",
											"objectClass": "mapIcons",
											"sid": 765592896048125,
											"parameters": {
												"visibility": "invisible"
											}
										}
									],
									"sid": 275801668711851
								}
							]
						},
						{
							"functionName": "drawMapIcons",
							"functionDescription": "",
							"functionCategory": "MiniMap",
							"functionReturnType": "none",
							"functionCopyPicked": false,
							"functionIsAsync": false,
							"functionParameters": [],
							"eventType": "function-block",
							"conditions": [],
							"actions": [],
							"sid": 315011792096294,
							"children": [
								{
									"eventType": "variable",
									"name": "distX",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 201737592376132
								},
								{
									"eventType": "variable",
									"name": "distY",
									"type": "number",
									"initialValue": "0",
									"comment": "",
									"isStatic": false,
									"isConstant": false,
									"sid": 949430033922177
								},
								{
									"eventType": "block",
									"conditions": [
										{
											"id": "every-x-seconds",
											"objectClass": "System",
											"sid": 979321829516218,
											"disabled": true,
											"parameters": {
												"interval-seconds": ".04"
											}
										}
									],
									"actions": [],
									"sid": 803353089381855,
									"children": [
										{
											"eventType": "block",
											"conditions": [
												{
													"id": "for-each",
													"objectClass": "System",
													"sid": 365865826026568,
													"parameters": {
														"object": "mapItems"
													}
												}
											],
											"actions": [],
											"sid": 798301590111765,
											"children": [
												{
													"eventType": "block",
													"conditions": [
														{
															"id": "pick-children",
															"objectClass": "mapItems",
															"sid": 719480022606959,
															"parameters": {
																"child": "mapIcons",
																"which": "own"
															}
														}
													],
													"actions": [
														{
															"id": "set-position",
															"objectClass": "mapIcons",
															"sid": 143622834211964,
															"parameters": {
																"x": "cutOut.X + (mapItems.X * (miniMap.pScaleFov * miniMap.pScale)) - (miniMap.pOrigX - miniMap.X)",
																"y": "cutOut.Y + (mapItems.Y * (miniMap.pScaleFov * miniMap.pScale)) -(miniMap.pOrigY - miniMap.Y)"
															}
														},
														{
															"id": "set-scale",
															"objectClass": "mapIcons",
															"sid": 971922820668795,
															"parameters": {
																"scale": "miniMap.pScaleFov * miniMap.pScale"
															}
														},
														{
															"id": "move-to-top",
															"objectClass": "mapIcons",
															"sid": 910321302378226
														}
													],
													"sid": 328292812899110
												}
											]
										},
										{
											"eventType": "block",
											"conditions": [],
											"actions": [
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 804463649120636,
													"parameters": {
														"variable": "distX",
														"value": "(OriginalViewportWidth / 2) - LayerToLayerX(mapLayer, \"cutout\", spr_playerActual_icon.X, spr_playerActual_icon.Y)"
													}
												},
												{
													"id": "set-eventvar-value",
													"objectClass": "System",
													"sid": 979129938082976,
													"parameters": {
														"variable": "distY",
														"value": "(OriginalViewportHeight / 2) - LayerToLayerY(mapLayer, \"cutout\", spr_playerActual_icon.X, spr_playerActual_icon.Y)"
													}
												},
												{
													"id": "set-position",
													"objectClass": "miniMap",
													"sid": 542353327107944,
													"parameters": {
														"x": "Self.X + distX",
														"y": "Self.Y + distY"
													}
												}
											],
											"sid": 864308341364693
										}
									]
								}
							]
						}
					]
				}
			],
			"sid": 717254073600538
		}
	],
	"sid": 538479554717037
}